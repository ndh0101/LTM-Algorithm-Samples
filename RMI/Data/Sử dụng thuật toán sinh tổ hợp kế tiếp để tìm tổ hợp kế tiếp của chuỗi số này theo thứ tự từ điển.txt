            Object received = service.requestData(studentCode, qCode);
            int[] numbers;
            // Giả sử server gửi kiểu chuỗi "1,2,3" hoặc List<Integer>
            if (received instanceof String) {
                numbers = parseStringToIntArray((String) received);
            } else if (received instanceof int[]) {
                numbers = (int[]) received;
            } else if (received instanceof java.util.List) {
                java.util.List<?> list = (java.util.List<?>) received;
                numbers = list.stream().mapToInt(e -> Integer.parseInt(e.toString())).toArray();
            } else {
                System.out.println("Dữ liệu không hợp lệ từ server!");
                return;
            }
            // b. Tìm tổ hợp kế tiếp
            nextPermutation(numbers);

            // c. Gửi chuỗi kết quả trở lại server (ở dạng chuỗi)
            String result = arrayToString(numbers);
            service.submitData(studentCode, qCode, result);
    	}

    // Thuật toán sinh tổ hợp kế tiếp (Next Permutation)
    private static void nextPermutation(int[] nums) {
        int i = nums.length - 2;
        // Tìm vị trí i sao cho nums[i] < nums[i+1]
        while (i >= 0 && nums[i] >= nums[i + 1]) i--;
        if (i >= 0) {
            // Tìm j > i sao cho nums[j] > nums[i]
            int j = nums.length - 1;
            while (nums[j] <= nums[i]) j--;
            swap(nums, i, j);
        }
        // Đảo ngược đoạn sau i
        reverse(nums, i + 1, nums.length - 1);
    }
    private static void swap(int[] nums, int i, int j) {
        int tmp = nums[i];
        nums[i] = nums[j];
        nums[j] = tmp;
    }
    private static void reverse(int[] nums, int start, int end) {
        while (start < end) swap(nums, start++, end--);
    }
    // Hàm chuyển chuỗi "1,2,3" → int[]
    private static int[] parseStringToIntArray(String data) {
        String[] parts = data.split("[,\\s]+");
        int[] nums = new int[parts.length];
        for (int i = 0; i < parts.length; i++) {
            nums[i] = Integer.parseInt(parts[i].trim());
        }
        return nums;
    }
    // Hàm chuyển int[] → "1, 3, 2"
    private static String arrayToString(int[] arr) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < arr.length; i++) {
            sb.append(arr[i]);
            if (i < arr.length - 1) sb.append(", ");
        }
        return sb.toString();
    }
